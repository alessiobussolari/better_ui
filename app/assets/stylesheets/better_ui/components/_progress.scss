@layer components {
  // Classe base per la barra di progresso (Block)
  .bui-progress {
    @apply w-full relative;

    // Accessibility attributes
    &[role="progressbar"] {
      @apply outline-none;
    }

    &__container {
      @apply overflow-hidden bg-gray-200 rounded-full h-2;
    }

    &__bar {
      @apply h-full rounded-full transition-all duration-300;
    }

    &__label {
      @apply text-xs font-medium text-right mt-1 text-gray-700;
    }

    &__circle {
      @apply relative inline-flex;

      svg {
        @apply w-full h-auto transform -rotate-90;
        width: 4rem; // Default size with rem for better scaling
        height: 4rem;
      }
    }

    &__circle-background {
      @apply stroke-current text-gray-200;
    }

    &__circle-value {
      @apply stroke-current transition-all duration-300 ease-in-out;
    }

    &__circle-text {
      @apply absolute inset-0 flex items-center justify-center font-medium text-sm;
    }

    // Modifiers (stili)
    &--indeterminate &__bar {
      @apply w-3/4;
      animation: progress-bar-indeterminate 1.5s infinite linear;
    }

    &--indeterminate &__circle svg {
      animation: progress-circle-rotate 2s infinite linear;
    }

    &--indeterminate &__circle-value {
      animation: progress-circle-dash 1.5s ease-in-out infinite;
    }

    &--circular {
      @apply inline-flex;
    }

    // Dimensioni (linear)
    &--sm &__container {
      @apply h-1;
    }

    &--md &__container {
      @apply h-2;
    }

    &--lg &__container {
      @apply h-3;
    }

    // Dimensioni (circular)
    &--sm &__circle svg {
      width: 2.5rem;
      height: 2.5rem;
    }

    &--md &__circle svg {
      width: 4rem;
      height: 4rem;
    }

    &--lg &__circle svg {
      width: 6rem;
      height: 6rem;
    }

    // Varianti colore - Linear
    &--default &__bar {
      @apply bg-gray-700;
    }

    &--red &__bar {
      @apply bg-red-500;
    }

    &--rose &__bar {
      @apply bg-rose-500;
    }

    &--orange &__bar {
      @apply bg-orange-500;
    }

    &--blue &__bar {
      @apply bg-blue-500;
    }

    &--green &__bar {
      @apply bg-green-500;
    }

    &--yellow &__bar {
      @apply bg-yellow-500;
    }

    &--violet &__bar {
      @apply bg-violet-500;
    }

    // Varianti colore - Circular
    &--default &__circle-value {
      @apply text-gray-700;
    }

    &--red &__circle-value {
      @apply text-red-500;
    }

    &--rose &__circle-value {
      @apply text-rose-500;
    }

    &--orange &__circle-value {
      @apply text-orange-500;
    }

    &--blue &__circle-value {
      @apply text-blue-500;
    }

    &--green &__circle-value {
      @apply text-green-500;
    }

    &--yellow &__circle-value {
      @apply text-yellow-500;
    }

    &--violet &__circle-value {
      @apply text-violet-500;
    }
  }

  // Animations for indeterminate states
  @keyframes progress-bar-indeterminate {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  @keyframes progress-circle-rotate {
    100% {
      transform: rotate(270deg);
    }
  }

  @keyframes progress-circle-dash {
    0% {
      stroke-dasharray: 1, 200;
      stroke-dashoffset: 0;
    }
    50% {
      stroke-dasharray: 89, 200;
      stroke-dashoffset: -35;
    }
    100% {
      stroke-dasharray: 89, 200;
      stroke-dashoffset: -124;
    }
  }
} 
