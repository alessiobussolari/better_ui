<%
  # Utilizzo dell'approccio programmatico per risolvere i problemi di rendering
  table = BetterUi::General::Table::Component.new(
    theme: theme, 
    size: size, 
    bordered: bordered, 
    compact: compact, 
    minimal: minimal
  )
  
  # Configurazione thead
  table.with_thead do |thead|
    # Aggiungo una riga all'header
    thead.with_row do |row|
      row.with_header(sortable: true) { "Nome" }
      row.with_header { "Email" }
      row.with_header { "Ruolo" }
    end
  end
  
  # Configurazione tbody
  table.with_tbody(striped: striped, hoverable: hoverable) do |tbody|
    # Prima riga
    tbody.with_row do |row|
      row.with_cell { "Mario Rossi" }
      row.with_cell { "mario.rossi@example.com" }
      row.with_cell do
        content_tag(:span, "Admin", class: "px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded")
      end
    end
    
    # Seconda riga
    tbody.with_row do |row|
      row.with_cell { "Giulia Bianchi" }
      row.with_cell { "giulia.bianchi@example.com" }
      row.with_cell do
        content_tag(:span, "User", class: "px-2 py-1 text-xs bg-green-100 text-green-800 rounded")
      end
    end
    
    # Terza riga (evidenziata)
    tbody.with_row(highlighted: true) do |row|
      row.with_cell { "Paolo Verdi" }
      row.with_cell { "paolo.verdi@example.com" }
      row.with_cell do
        content_tag(:span, "Moderator", class: "px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded")
      end
    end
  end
%>

<%= render table %>
